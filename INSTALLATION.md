# 安装和配置指南

本指南将帮助您一步步安装和配置飞书知识收藏插件。

## 📋 前置要求

- Chrome 浏览器 88+ 版本
- 飞书企业账号
- 飞书开放平台应用权限

## 🔧 第一步：创建飞书应用

### 1. 登录飞书开放平台

访问 [飞书开放平台](https://open.feishu.cn/) 并使用企业账号登录。

### 2. 创建企业自建应用

1. 点击"创建应用"
2. 选择"企业自建应用"
3. 填写应用信息：
   - 应用名称：飞书知识收藏插件
   - 应用描述：网页收藏管理工具
   - 应用图标：可选
4. 点击"创建"

### 3. 获取应用凭证

在应用详情页面：
1. 记录 **App ID** (格式：cli_xxxxxxxxxx)
2. 记录 **App Secret** (请妥善保管)

### 4. 配置应用权限

在"权限管理"页面添加以下权限：
- `bitable:app` - 查看、编辑多维表格

### 5. 发布应用

1. 在"版本管理与发布"页面
2. 创建版本并发布
3. 确保应用状态为"已启用"

## 📊 第二步：准备多维表格

### 1. 创建多维表格

1. 在飞书中创建新的多维表格
2. 或使用现有的多维表格

### 2. 配置表格字段

确保表格包含以下字段（字段名称可自定义）：

| 字段名称 | 字段类型 | 说明 |
|---------|----------|------|
| 网站地址 | 文本 | 存储页面URL |
| 网站标题 | 文本 | 存储页面标题 |
| 网站说明 | 文本 | 用户自定义描述 |
| 网站备注 | 多行文本 | 详细备注信息 |
| 网站标签 | 多选 | 分类标签 |
| 页面摘要 | 多行文本 | 页面选中内容 |
| 创建时间 | 日期时间 | 收藏时间 |

### 3. 获取表格ID信息

从表格URL中提取：
```
https://xxxx.feishu.cn/base/BaseID?table=TableID&view=ViewID
```
- **Base ID**: URL中 `/base/` 后面的部分
- **Table ID**: URL中 `table=` 后面的部分

## 💾 第三步：安装Chrome插件

### 方式一：从源码安装（推荐）

1. **下载源码**
   ```bash
   git clone <repository-url>
   cd feishu-browsers-plugin
   ```

2. **打开Chrome扩展管理**
   - 地址栏输入：`chrome://extensions/`
   - 或菜单：更多工具 → 扩展程序

3. **启用开发者模式**
   - 点击右上角的"开发者模式"开关

4. **加载插件**
   - 点击"加载已解压的扩展程序"
   - 选择项目文件夹
   - 插件应该出现在列表中

### 方式二：从crx文件安装

1. 下载发布的 `.crx` 文件
2. 拖拽到 Chrome 扩展页面
3. 确认安装

## ⚙️ 第四步：配置插件

### 1. 打开设置页面

- 右键点击插件图标
- 选择"选项"
- 或点击插件详情中的"扩展程序选项"

### 2. 填写基础配置

在"基础配置"标签页中填入：

| 配置项 | 值 | 示例 |
|-------|-----|------|
| 应用ID | 从飞书开放平台获取 | cli_a8de0f42f020101c |
| 应用密钥 | 从飞书开放平台获取 | xgzYDKAkxPTZaeL9VXuDKh4rMA1SvLB4 |
| 多维表格ID | 从表格URL提取 | U2GobH43xaSwFlsN92ZcgDF6nYe |
| 数据表ID | 从表格URL提取 | tblQWm4ttkQD7QH0 |

### 3. 测试连接

1. 点击"测试连接"按钮
2. 确认显示"连接成功"
3. 点击"保存配置"

### 4. 字段映射（可选）

1. 点击"刷新字段列表"
2. 如果字段名称与默认不同，请手动映射
3. 确保关键字段正确映射

## 🎯 第五步：开始使用

### 1. 收藏网页

1. 浏览到要收藏的网页
2. 点击浏览器工具栏中的插件图标
3. 编辑收藏信息：
   - 确认标题
   - 添加描述
   - 设置标签
   - 添加备注
4. 点击"保存收藏"

### 2. 管理历史

1. 在设置页面点击"历史记录"标签
2. 可以搜索、过滤和管理收藏记录
3. 支持按时间、标签筛选

### 3. 个性化设置

在"高级设置"中可以配置：
- 默认标签
- 自动填充选项
- 通知设置
- 重复检测

## 🔍 故障排除

### 常见问题

#### 1. 插件图标显示感叹号
**原因**：配置不完整或错误
**解决**：
- 检查所有配置项是否填写
- 测试API连接是否成功
- 确认应用权限和状态

#### 2. 无法连接飞书API
**原因**：网络或配置问题
**解决**：
- 检查网络连接
- 确认App ID和Secret正确
- 检查应用是否已发布启用
- 确认权限配置正确

#### 3. 数据没有同步到表格
**原因**：表格权限或字段问题
**解决**：
- 确认应用有表格操作权限
- 检查Base ID和Table ID
- 确认字段映射正确
- 查看表格是否存在且可访问

#### 4. 部分网站无法收藏
**原因**：内容安全策略限制
**解决**：
- 这是正常现象
- 某些网站限制扩展程序访问
- 尝试手动复制信息

### 调试方法

#### 查看后台日志
1. 打开 `chrome://extensions/`
2. 找到插件，点击"详细信息"
3. 点击"检查视图：背景页"
4. 查看Console中的日志

#### 查看弹窗日志
1. 点击插件图标打开弹窗
2. 在弹窗中按F12
3. 查看Console中的错误信息

## 📞 获取帮助

如果遇到问题：
1. 查看 [FAQ文档](FAQ.md)
2. 提交 [GitHub Issue](issues)
3. 查看 [技术文档](README.md)

## 🎉 安装完成

恭喜！您已成功安装和配置了飞书知识收藏插件。现在可以开始愉快地收藏和管理网页内容了！

记住：
- 定期备份配置和历史数据
- 关注插件更新获取新功能
- 向朋友推荐这个实用工具 😊