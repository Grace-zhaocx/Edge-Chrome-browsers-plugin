<!DOCTYPE html>
<html>
<head>
    <title>简单API测试</title>
</head>
<body>
    <h1>简单飞书API测试</h1>
    <button onclick="testBasicApi()">测试基础API</button>
    <div id="result"></div>

    <script>
        async function testBasicApi() {
            const result = document.getElementById('result');
            result.innerHTML = '测试中...';
            
            // 使用你的实际凭据
            const config = {
                appId: 'cli_a8de0f42f020101c',
                appSecret: 'xgzYDKAkxPTZaeL9VXuDKh4rMA1SvLB4'
            };
            
            try {
                // 先测试一个简单的请求
                console.log('开始测试API...');
                console.log('配置:', { appId: config.appId, secretLength: config.appSecret.length });
                
                const response = await fetch('https://open.feishu.cn/open-apis/auth/v3/tenant_access_token/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        app_id: config.appId,
                        app_secret: config.appSecret
                    })
                });
                
                console.log('响应状态:', response.status);
                const data = await response.json();
                console.log('响应数据:', data);
                
                if (data.code === 0) {
                    result.innerHTML = `<div style="color: green;">✅ 成功！Token获取成功</div>`;
                } else {
                    result.innerHTML = `<div style="color: red;">❌ 失败：${data.code} - ${data.msg}</div>`;
                }
                
            } catch (error) {
                console.error('请求失败:', error);
                result.innerHTML = `<div style="color: red;">❌ 网络错误: ${error.message}</div>`;
            }
        }
    </script>
</body>
</html>